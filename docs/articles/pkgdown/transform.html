<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transform variables (Data &gt; Transform) • radiant.data</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Transform variables (Data &gt; Transform)">
<meta property="og:description" content="radiant.data">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">radiant.data</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../articles/index.html">Articles</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://radiant-rstats.github.io/radiant/" class="external-link">radiant</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.data/">radiant.data</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.design/" class="external-link">radiant.design</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.basics/" class="external-link">radiant.basics</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.model/" class="external-link">radiant.model</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.multivariate/" class="external-link">radiant.multivariate</a>
    </li>
    <li>
      <a href="https://github.com/radiant-rstats/docker" class="external-link">docker</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/vrnijs" class="external-link">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/radiant-rstats" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Transform variables (Data &gt; Transform)</h1>
                        <h4 data-toc-skip class="author">Vincent R.
Nijs, Rady School of Management (UCSD)</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/radiant-rstats/radiant.data/blob/HEAD/vignettes/pkgdown/transform.Rmd" class="external-link"><code>vignettes/pkgdown/transform.Rmd</code></a></small>
      <div class="hidden name"><code>transform.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>Transform variables</p>
</blockquote>
<div class="section level3">
<h3 id="transform-command-log">Transform command log<a class="anchor" aria-label="anchor" href="#transform-command-log"></a>
</h3>
<p>All transformations applied in the <em>Data &gt; Transform</em> tab
can be logged. If, for example, you apply a
<code>Ln (natural log)</code> transformation to numeric variables the
following code is generated and put in the
<code>Transform command log</code> window at the bottom of your screen
when you click the <code>Store</code> button.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## transform variable</span>
<span class="va">diamonds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/mutate_ext.html">mutate_ext</a></span><span class="op">(</span>
  <span class="va">diamonds</span>, 
  .vars <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">price</span>, <span class="va">carat</span><span class="op">)</span>, 
  .funs <span class="op">=</span> <span class="va">log</span>, 
  .ext <span class="op">=</span> <span class="st">"_ln"</span>
<span class="op">)</span></code></pre></div>
<p>This is an important feature if you want to re-run a report with new,
but similar, data. Even more important is that there is a record of the
steps taken to transform the data and to generate results, i.e., your
work is now reproducible.</p>
<p>To add commands contained in the command log window to a report in
<a href="https://radiant-rstats.github.io/docs/data/report_rmd.html" target="_blank" class="external-link"><em>Report
&gt; Rmd</em></a> click the
<i title="report results" class="fa fa-edit"></i> icon.</p>
</div>
<div class="section level3">
<h3 id="filter-data">Filter data<a class="anchor" aria-label="anchor" href="#filter-data"></a>
</h3>
<p>Even if a filter has been specified it will be ignored for (most)
functions available in <em>Data &gt; Transform</em>. To create a new
dataset based on a filter navigate to the
<a href="https://radiant-rstats.github.io/docs/data/view.html" target="_blank" class="external-link"><em>Data
&gt; View</em></a> tab and click the <code>Store</code> button.
Alternatively, to create a new dataset based on a filter, select
<code>Split data &gt; Holdout sample</code> from the
<code>Transformation type</code> dropdown.</p>
</div>
<div class="section level3">
<h3 id="hide-summaries">Hide summaries<a class="anchor" aria-label="anchor" href="#hide-summaries"></a>
</h3>
<p>For larger datasets, or when summaries are not needed, it can useful
to click <code>Hide summaries</code>before selecting the transformation
type and specifying how you want to alter the data. If you do want to
see summaries make sure that <code>Hide summaries</code> is not
checked.</p>
</div>
<div class="section level3">
<h3 id="change-variables">Change variables<a class="anchor" aria-label="anchor" href="#change-variables"></a>
</h3>
<div class="section level4">
<h4 id="bin">Bin<a class="anchor" aria-label="anchor" href="#bin"></a>
</h4>
<p>The <code>Bin</code> command is a convenience function for the
<code>xtile</code> command discussed below when you want to create
multiple quintile/decile/… variables. To calculate quintiles enter
<code>5</code> as the <code>Nr bins</code>. The <code>reverse</code>
option replaces 1 by 5, 2 by 4, …, 5 by 1. Choose an appropriate
extension for the new variable(s).</p>
</div>
<div class="section level4">
<h4 id="change-type">Change type<a class="anchor" aria-label="anchor" href="#change-type"></a>
</h4>
<p>When you select <code>Type</code> from the
<code>Transformation type</code> drop-down another drop-down menu is
shown that will allow you to change the type (or class) of one or more
variables. For example, you can change a variable of type integer to a
variable of type factor. Click the <code>Store</code> button to commit
the changes to the data set. A description of the transformation options
is provided below.</p>
<ol style="list-style-type: decimal">
<li>As factor: convert a variable to type factor (i.e., a categorical
variable)</li>
<li>As number: convert a variable to type numeric</li>
<li>As integer: convert a variable to type integer</li>
<li>As character: convert a variable to type character (i.e.,
strings)</li>
<li>As times series: convert a variable to type ts</li>
<li>As date (mdy): convert a variable to a date if the dates are
structured as month-day-year</li>
<li>As date (dmy): convert a variable to a date if the dates are
structured as day-month-year</li>
<li>As date (ymd): convert a variable to a date if the dates are
structured as year-month-day</li>
<li>As date/time (mdy_hms): convert a variable to a date if the dates
are structured as month-day-year-hour-minute-second</li>
<li>As date/time (mdy_hm): convert a variable to a date if the dates are
structured as month-day-year-hour-minute</li>
<li>As date/time (dmy_hms): convert a variable to a date if the dates
are structured as day-month-year-hour-minute-second</li>
<li>As date/time (dmy_hm): convert a variable to a date if the dates are
structured as day-month-year-hour-minute</li>
<li>As date/time (ymd_hms): convert a variable to a date if the dates
are structured as year-month-day-hour-minute-second</li>
<li>As date/time (ymd_hm): convert a variable to a date if the dates are
structured as year-month-day-hour-minute</li>
</ol>
<p><strong>Note:</strong> When converting a variable to type
<code>ts</code> (i.e., time series) you should, at least, specify a
starting period and the frequency data. For example, for weekly data
that starts in the 4th week of the year, enter <code>4</code> as the
<code>Start period</code> and set <code>Frequency</code> to
<code>52</code>.</p>
</div>
<div class="section level4">
<h4 id="normalize">Normalize<a class="anchor" aria-label="anchor" href="#normalize"></a>
</h4>
<p>Choose <code>Normalize</code> from the
<code>Transformation type</code> drop-down to standardize one or more
variables. For example, in the diamonds data we may want to express
price of a diamond per-carat. Select <code>carat</code> as the
<code>Normalizing variable</code> and <code>price</code> in the
<code>Select variable(s)</code> box. You will see summary statistics for
the new variable (e.g., <code>price_carat</code>) in the main panel.
Commit changes to the data by clicking the <code>Store</code>
button.</p>
</div>
<div class="section level4">
<h4 id="recode">Recode<a class="anchor" aria-label="anchor" href="#recode"></a>
</h4>
<p>To use the recode feature select the variable you want to change and
choose <code>Recode</code> from the <code>Transformation type</code>
drop-down. Provide one or more recode commands, separated by a
<code>;</code>, and press return to see information about the changed
variable. Note that you can specify a name for the recoded variable in
the <code>Recoded variable name</code> input box (press return to submit
changes). Finally, click <code>Store</code> to add the recoded variable
to the data. Some examples are given below.</p>
<ol style="list-style-type: decimal">
<li>Set values below 20 to <code>Low</code> and all others to
<code>High</code>
</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>lo<span class="sc">:</span><span class="dv">20</span> <span class="ot">=</span> <span class="st">'Low'</span>; <span class="cf">else</span> <span class="ot">=</span> <span class="st">'High'</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Set above 20 to <code>High</code> and all others to
<code>Low</code>
</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span><span class="sc">:</span>hi <span class="ot">=</span> <span class="st">'High'</span>; <span class="cf">else</span> <span class="ot">=</span> <span class="st">'Low'</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Set values 1 through 12 to <code>A</code>, 13:24 to <code>B</code>,
and the remainder to <code>C</code>
</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">12</span> <span class="ot">=</span> <span class="st">'A'</span>; <span class="dv">13</span><span class="sc">:</span><span class="dv">24</span> <span class="ot">=</span> <span class="st">'B'</span>; <span class="cf">else</span> <span class="ot">=</span> <span class="st">'C'</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Collapse age categories for a
<a href="https://radiant-rstats.github.io/docs/basics/cross_tabs.html" target="_blank" class="external-link"><em>Basics
&gt; Tables &gt; Cross-tabs</em></a> cross-tab analysis. In the example
below <code>&lt;25</code> and <code>25-34</code> are recoded to
<code>&lt;35</code>, <code>35-44</code> and <code>35-44</code> are
recoded to <code>35-54</code>, and <code>55-64</code> and
<code>&gt;64</code> are recoded to <code>&gt;54</code>
</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">'&lt;25'</span> <span class="op">=</span> <span class="st">'&lt;35'</span>; <span class="st">'25-34'</span> <span class="op">=</span> <span class="st">'&lt;35'</span>; <span class="st">'35-44'</span> <span class="op">=</span> <span class="st">'35-54'</span>; <span class="st">'45-54'</span> <span class="op">=</span> <span class="st">'35-54'</span>; <span class="st">'55-64'</span> <span class="op">=</span> <span class="st">'&gt;54'</span>; <span class="st">'&gt;64'</span> <span class="op">=</span> <span class="st">'&gt;54'</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>To exclude a particular value (e.g., an outlier in the data) for
subsequent analyses we can recode it to a missing value. For example, if
we want to remove the maximum value from a variable called
<code>sales</code> that is equal to 400 we would (1) select the variable
<code>sales</code> in the <code>Select variable(s)</code> box and enter
the command below in the <code>Recode</code> box. Press
<code>return</code> and <code>Store</code> to add the recoded variable
to the data</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">400</span> <span class="op">=</span> <span class="cn">NA</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>To recode specific numeric values (e.g., carat) to a new value (1)
select the variable <code>carat</code> in the
<code>Select variable(s)</code> box and enter the command below in the
<code>Recode</code> box to set the value for carat to 2 in all rows
where carat is currently larger than or equal to 2. Press
<code>return</code> and <code>Store</code> to add the recoded variable
to the data</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">2</span><span class="op">:</span><span class="va">hi</span> <span class="op">=</span> <span class="fl">2</span></code></pre></div>
<p><strong>Note:</strong> Do not use <code>=</code> in a variable label
when using the recode function (e.g., <code>50:hi = '&gt;= 50'</code>)
as this will cause an error.</p>
</div>
<div class="section level4">
<h4 id="reorder-or-remove-levels">Reorder or remove levels<a class="anchor" aria-label="anchor" href="#reorder-or-remove-levels"></a>
</h4>
<p>If a (single) variable of type <code>factor</code> is selected in
<code>Select variable(s)</code>, choose
<code>Reorder/Remove levels</code> from the
<code>Transformation type</code> drop-down to reorder and/or remove
levels. Drag-and-drop levels to reorder them or click the <span class="math inline">\(\times\)</span> to remove them. Note that, by
default, removing one or more levels will introduce missing values in
the data. If you prefer to recode the removed levels into a new level,
for example “other”, simply type “other” in the
<code>Replacement level name</code> input box and press
<code>return</code>. If the resulting factor levels appear as intended,
press <code>Store</code> to commit the changes. To temporarily exclude
levels from the data use the <code>Filter data</code> box (see the help
file linked in the
<a href="https://radiant-rstats.github.io/docs/data/view.html" target="_blank" class="external-link"><em>Data
&gt; View</em></a> tab).</p>
</div>
<div class="section level4">
<h4 id="rename">Rename<a class="anchor" aria-label="anchor" href="#rename"></a>
</h4>
<p>Choose <code>Rename</code> from the <code>Transformation type</code>
drop-down, select one or more variables, and enter new names for them in
the <code>Rename</code> box. Separate names by a <code>,</code>. Press
return to see summaries for the renamed variables on screen and press
<code>Store</code> to alter the variable names in the data.</p>
</div>
<div class="section level4">
<h4 id="replace">Replace<a class="anchor" aria-label="anchor" href="#replace"></a>
</h4>
<p>Choose <code>Replace</code> from the <code>Transformation type</code>
drop-down if you want to replace existing variables in the data with new
ones created using, for example, <code>Create</code>,
<code>Transform</code>, <code>Clipboard</code>, etc.. Select one or more
variables to overwrite and the same number of replacement variables.
Press <code>Store</code> to alter the data.</p>
</div>
<div class="section level4">
<h4 id="transform">Transform<a class="anchor" aria-label="anchor" href="#transform"></a>
</h4>
<p>When you select <code>Transform</code> from the
<code>Transformation type</code> drop-down another drop-down menu is
shown you can use to apply common transformations to one or more
variables in the data. For example, to take the (natural) log of a
variable select the variable(s) you want to transform and choose
<code>Ln (natural log)</code> from the <code>Apply function</code>
drop-down. The transformed variable will have the extension specified in
the <code>Variable name extension</code> input (e.g,. <code>_ln</code>).
Make sure to press <code>return</code> after changing the extension.
Click the <code>Store</code> button to add the (changed) variable(s) to
the data set. A description of the transformation functions included in
Radiant is provided below.</p>
<ol style="list-style-type: decimal">
<li>Ln: create a natural log-transformed version of the selected
variable (i.e., log(x) or ln(x))</li>
<li>Square: multiply a variable by itself (i.e., x^2 or square(x))</li>
<li>Square-root: take the square-root of a variable (i.e., x^.5)</li>
<li>Absolute: Absolute value of a variable (i.e., abs(x))</li>
<li>Center: create a new variable with a mean of zero (i.e., x -
mean(x))</li>
<li>Standardize: create a new variable with a mean of zero and standard
deviation of one (i.e., (x - mean(x))/sd(x))</li>
<li>Inverse: 1/x</li>
</ol>
</div>
</div>
<div class="section level3">
<h3 id="create-new-variables">Create new variable(s)<a class="anchor" aria-label="anchor" href="#create-new-variables"></a>
</h3>
<div class="section level4">
<h4 id="clipboard">Clipboard<a class="anchor" aria-label="anchor" href="#clipboard"></a>
</h4>
<p>Although not recommended, you can manipulate your data in a
spreadsheet (e.g., Excel or Google sheets) and copy-and-paste the data
back into Radiant. If you don’t have the original data in a spreadsheet
already use the clipboard feature in
<a href="https://radiant-rstats.github.io/docs/data/manage.html" target="_blank" class="external-link"><em>Data
&gt; Manage</em></a> so you can paste it into the spreadsheet or click
the download icon on the top right of your screen in the
<a href="https://radiant-rstats.github.io/docs/data/view.html" target="_blank" class="external-link"><em>Data
&gt; View</em></a> tab. Apply your transformations in the spreadsheet
program and then copy the new variable(s), with a header label, to the
clipboard (i.e., CTRL-C on windows and CMD-C on mac). Select
<code>Clipboard</code> from the <code>Transformation type</code>
drop-down and paste the new data into the
<code>Paste from spreadsheet</code> box. It is key that new variable(s)
have the same number of observations as the data in Radiant. To add the
new variables to the data click <code>Store</code>.</p>
<blockquote>
<p><strong>Note:</strong> Using the clipboard feature for data
transformation is discouraged because it is not reproducible.</p>
</blockquote>
</div>
<div class="section level4">
<h4 id="create">Create<a class="anchor" aria-label="anchor" href="#create"></a>
</h4>
<p>Choose <code>Create</code> from the <code>Transformation type</code>
drop-down. This is the most flexible command to create new or transform
existing variables. However, it also requires some basic knowledge of
R-syntax. A new variable can be any function of other variables in the
(active) dataset. Some examples are given below. In each example the
name to the left of the <code>=</code> sign is the name of the new
variable. To the right of the <code>=</code> sign you can include other
variable names and basic R-functions. After you type the command press
<code>return</code> to see summary statistics for the new variable. If
the result is as expected press <code>Store</code> to add it to the
dataset.</p>
<blockquote>
<p><strong>Note:</strong> If one or more variables is selected from the
<code>Select variables</code> list they will be used to <em>group</em>
the data before creating the new variable (see example 1. below). If
this is not the intended result make sure that no variables are selected
when creating new variables</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Create a new variable <code>z</code> that is equal to the mean of
price. To calculate the mean of price per group (e.g., per level of
clarity) select <code>clarity</code> from the
<code>Select variables</code> list before creating <code>z</code>
</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">price</span><span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Create a new variable <code>z</code> that is the difference between
variables x and y</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="va">x</span> <span class="op">-</span> <span class="va">y</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Create a new variable <code>z</code> that is a transformation of
variable <code>x</code> with mean equal to zero (see also
<code>Transform &gt; Center</code>):</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="va">x</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Create a new _logical) variable <code>z</code> that takes on the
value TRUE when <code>x &gt; y</code> and FALSE otherwise</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="va">y</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Create a new <em>logical</em> <code>z</code> that takes on the value
TRUE when <code>x</code> is equal to <code>y</code> and FALSE
otherwise</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="va">x</span> <span class="op">==</span> <span class="va">y</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Create a variable <code>z</code> that is equal to <code>x</code>
lagged by 3 periods</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">x</span>,<span class="fl">3</span><span class="op">)</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Create a categorical variable with two levels (i.e.,
<code>smaller</code> and <code>bigger</code>)</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="va">y</span>, <span class="st">'smaller'</span>, <span class="st">'bigger'</span><span class="op">)</span></code></pre></div>
<ol start="8" style="list-style-type: decimal">
<li>Create a categorical variable with three levels. An alternative
approach would be to use the <code>Recode</code> function described
below</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">60</span>, <span class="st">'&lt; 60'</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">65</span>, <span class="st">'&gt; 65'</span>, <span class="st">'60-65'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<ol start="9" style="list-style-type: decimal">
<li>Convert an outlier to a missing value. For example, if we want to
remove the maximum value from a variable called <code>sales</code> that
is equal to 400 we could use an <code>ifelse</code> statement and enter
the command below in the <code>Create</code> box. Press
<code>return</code> and <code>Store</code> to add the
<code>sales_rc</code> to the data. Note that if we had entered
<code>sales</code> on the left-hand side of the <code>=</code> sign the
original variable would have been overwritten</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sales_rc</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">sales</span> <span class="op">&gt;</span> <span class="fl">400</span>, <span class="cn">NA</span>, <span class="va">sales</span><span class="op">)</span></code></pre></div>
<ol start="10" style="list-style-type: decimal">
<li>If a respondent with ID 3 provided information on the wrong scale in
a survey (e.g., income in $1s rather than in $1000s) we could use an
<code>ifelse</code> statement and enter the command below in the
<code>Create</code> box. As before, press <code>return</code> and
<code>Store</code> to add <code>sales_rc</code> to the data</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">income_rc</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">ID</span> <span class="op">==</span> <span class="fl">3</span>, <span class="va">income</span><span class="op">/</span><span class="fl">1000</span>, <span class="va">income</span><span class="op">)</span></code></pre></div>
<ol start="11" style="list-style-type: decimal">
<li>If multiple respondents made the same scaling mistake (e.g., those
with ID 1, 3, and 15) we again use <code>Create</code> and enter:</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">income_rc</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">ID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">15</span><span class="op">)</span>, <span class="va">income</span><span class="op">/</span><span class="fl">1000</span>, <span class="va">income</span><span class="op">)</span></code></pre></div>
<ol start="12" style="list-style-type: decimal">
<li>If a date variable is in a format not available through the
<code>Type</code> menu you can use the <code>parse_date_time</code>
function. For a date formatted as <code>2-1-14</code> you would specify
the command below (note that this format will also be parsed correctly
by the <code>mdy</code> function in the <code>Type</code> menu)</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">date</span> <span class="op">=</span> <span class="fu">parse_date_time</span><span class="op">(</span><span class="va">x</span>, <span class="st">'%m%d%y'</span><span class="op">)</span></code></pre></div>
<ol start="13" style="list-style-type: decimal">
<li>Determine the time difference between two dates/times in
seconds</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tdiff</span> <span class="op">=</span> <span class="fu"><a href="../../reference/as_duration.html">as_duration</a></span><span class="op">(</span><span class="va">time2</span> <span class="op">-</span> <span class="va">time1</span><span class="op">)</span></code></pre></div>
<ol start="14" style="list-style-type: decimal">
<li>Extract the month from a date variable</li>
</ol>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="../../reference/month.html">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></code></pre></div>
<ol start="15" style="list-style-type: decimal">
<li>Other attributes that can be extracted from a date or date-time
variable are <code>minute</code>, <code>hour</code>, <code>day</code>,
<code>week</code>, <code>quarter</code>, <code>year</code>,
<code>wday</code> (for weekday). For <code>wday</code> and
<code>month</code> it can be convenient to add <code>label = TRUE</code>
to the call. For example, to extract the weekday from a date variable
and use a label rather than a number</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wd</span> <span class="op">=</span> <span class="fu"><a href="../../reference/wday.html">wday</a></span><span class="op">(</span><span class="va">date</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<ol start="16" style="list-style-type: decimal">
<li>Calculate the distance between two locations using lat-long
information</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dist</span> <span class="op">=</span> <span class="fu"><a href="../../reference/as_distance.html">as_distance</a></span><span class="op">(</span><span class="va">lat1</span>, <span class="va">long1</span>, <span class="va">lat2</span>, <span class="va">long2</span><span class="op">)</span></code></pre></div>
<ol start="17" style="list-style-type: decimal">
<li>Calculate quintiles for a variable <code>recency</code> by using the
<code>xtile</code> command. To create deciles replace <code>5</code> by
<code>10</code>.</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rec_iq</span> <span class="op">=</span> <span class="fu"><a href="../../reference/xtile.html">xtile</a></span><span class="op">(</span><span class="va">recency</span>, <span class="fl">5</span><span class="op">)</span></code></pre></div>
<ol start="18" style="list-style-type: decimal">
<li>To reverse the ordering of the quintiles created in 17 above use
<code>rev = TRUE</code>
</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rec_iq</span> <span class="op">=</span> <span class="fu"><a href="../../reference/xtile.html">xtile</a></span><span class="op">(</span><span class="va">recency</span>, <span class="fl">5</span>, rev <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<ol start="19" style="list-style-type: decimal">
<li>To remove text from entries in a character or factor variable use
<code>sub</code> to remove only the first instance or <code>gsub</code>
to remove all instances. For example, suppose each row for a variable
<code>bk_score</code> has the letters “clv” before a number (e.g.,
“clv150”). We could replace each occurrence of “clv” by “” as
follows:</li>
</ol>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bk_score</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"clv"</span>, <span class="st">""</span>, <span class="va">bk_score</span><span class="op">)</span></code></pre></div>
<p>Note: For examples 7, 8, and 15 above you may need to change the new
variable to type <code>factor</code> before using it for further
analysis (see also <code>Change type</code> above)</p>
</div>
</div>
<div class="section level3">
<h3 id="clean-data">Clean data<a class="anchor" aria-label="anchor" href="#clean-data"></a>
</h3>
<div class="section level4">
<h4 id="remove-missing-values">Remove missing values<a class="anchor" aria-label="anchor" href="#remove-missing-values"></a>
</h4>
<p>Choose <code>Remove missing</code> from the
<code>Transformation type</code> drop-down to eliminate rows with one or
more missing values. Rows with missing values for
<code>Select variables</code> will be removed. Press <code>Store</code>
to change the data. If missing values were present you will see the
number of observations in the data summary change (i.e., the value of
<em>n</em> changes) as variables are selected.</p>
</div>
<div class="section level4">
<h4 id="reorder-or-remove-variables">Reorder or remove variables<a class="anchor" aria-label="anchor" href="#reorder-or-remove-variables"></a>
</h4>
<p>Choose <code>Reorder/Remove variables</code> from the
<code>Transformation type</code> drop-down. Drag-and-drop variables to
reorder them in the data. To remove a variable click the <span class="math inline">\(\times\)</span> symbol next to the label. Press
<code>Store</code> to commit the changes.</p>
</div>
<div class="section level4">
<h4 id="remove-duplicates">Remove duplicates<a class="anchor" aria-label="anchor" href="#remove-duplicates"></a>
</h4>
<p>It is common to have one or more variables in a dataset that have
only unique values (i.e., no duplicates). Customer IDs, for example,
should be unique unless the dataset contains multiple orders for the
same customer. To remove duplicates select one or more variables to
determine <em>uniqueness</em>. Choose <code>Remove duplicates</code>
from the <code>Transformation type</code> drop-down and check how the
displayed summary statistics change. Press <code>Store</code> to change
the data. If there are duplicate rows you will see the number of
observations in the data summary change (i.e., the value of <em>n</em>
and <em>n_distinct</em> will change).</p>
</div>
<div class="section level4">
<h4 id="show-duplicates">Show duplicates<a class="anchor" aria-label="anchor" href="#show-duplicates"></a>
</h4>
<p>If there are duplicates in the data use <code>Show duplicates</code>
to get a better sense for the data points that have the same value in
multiple rows. If you want to explore duplicates using the
<a href="https://radiant-rstats.github.io/docs/data/view.html" target="_blank" class="external-link"><em>Data
&gt; View</em></a> tab make sure to <code>Store</code> them in a
different dataset (i.e., make sure <strong>not</strong> to overwrite the
data you are working on). If you choose to show duplicates based on all
columns in the data only one of the duplicate rows will be shown. These
rows are <strong>exactly</strong> the same so showing 2 or 3 isn’t
helpful. If, however, we are looking for duplicates based on a subset of
the available variables Radiant will generate a dataset with
<strong>all</strong> relevant rows.</p>
</div>
</div>
<div class="section level3">
<h3 id="expand-data">Expand data<a class="anchor" aria-label="anchor" href="#expand-data"></a>
</h3>
<div class="section level4">
<h4 id="expand-grid">Expand grid<a class="anchor" aria-label="anchor" href="#expand-grid"></a>
</h4>
<p>Create a dataset with all combinations of values for a selection of
variables. This is useful to generate datasets for prediction in, for
example,
<a href="https://radiant-rstats.github.io/docs/model/regress.html" target="_blank" class="external-link"><em>Model
&gt; Estimate &gt; Linear regression (OLS)</em></a> or
<a href="https://radiant-rstats.github.io/docs/model/logistic.html" target="_blank" class="external-link"><em>Model
&gt; Estimate &gt; Logistic regression (GLM)</em></a>. Suppose you want
to create a dataset with all possible combinations of values for
<code>cut</code> and <code>color</code> of a diamond. By selecting
<code>Expand grid</code> from the <code>Transformation type</code>
dropdown and <code>cut</code> and <code>color</code> in the
<code>Select variable(s)</code> box we can see in the screenshot below
that there are 35 possible combinations (i.e., <code>cut</code> has 5
unique values and <code>color</code> has 7 unique values so 5 x 7
combinations are possible). Choose a name for the new dataset (e.g.,
diamonds_expand) and click the <code>Store</code> button to add it to
the <code>Datasets</code> dropdown.</p>
<p align="center">
<img src="https://radiant-rstats.github.io/docs/data/figures//expand_grid.png"></p>
</div>
<div class="section level4">
<h4 id="table-to-data">Table-to-data<a class="anchor" aria-label="anchor" href="#table-to-data"></a>
</h4>
<p>Turn a frequency table into a dataset. The number of rows will equal
the sum of all frequencies.</p>
</div>
</div>
<div class="section level3">
<h3 id="split-data">Split data<a class="anchor" aria-label="anchor" href="#split-data"></a>
</h3>
<div class="section level4">
<h4 id="holdout-sample">Holdout sample<a class="anchor" aria-label="anchor" href="#holdout-sample"></a>
</h4>
<p>To create a holdout sample based on a filter, select
<code>Holdout sample</code> from the <code>Transformation type</code>
dropdown. By default the <em>opposite</em> of the active filter is used.
For example, if analysis is conducted on observations with
<code>date &lt; '2014-12-13'</code> then the holdout sample will contain
rows with <code>date &gt;= '2014-12-13'</code> if the
<code>Reverse filter</code> box is checked.</p>
</div>
<div class="section level4">
<h4 id="training-variable">Training variable<a class="anchor" aria-label="anchor" href="#training-variable"></a>
</h4>
<p>To create a variable that can be used to (randomly) filter a dataset
for model training and testing, select <code>Training variable</code>
from the <code>Transformation type</code> dropdown. Specify either the
number of observations to use for training (e.g., set <code>Size</code>
to 2000) or a proportion of observations to select (e.g., set
<code>Size</code> to .7). The new variable will have a value
<code>1</code> for training and <code>0</code> test data.</p>
<p>It is also possible to select one or morel variables for
<code>blocking</code> in random assignment to the training and test
samples. This can help ensure that, for example, the proportion of
positive and negative and negative cases (e.g., “buy” vs “no buy”) for a
variable of interest is (almost) identical in the training and test
sample.</p>
</div>
</div>
<div class="section level3">
<h3 id="tidy-data">Tidy data<a class="anchor" aria-label="anchor" href="#tidy-data"></a>
</h3>
<div class="section level4">
<h4 id="gather-columns">Gather columns<a class="anchor" aria-label="anchor" href="#gather-columns"></a>
</h4>
<p>Combine multiple variables into one column. If you have the
<code>diamonds</code> dataset loaded, select <code>cut</code> and
<code>color</code> in the <code>Select variable(s)</code> box after
selecting <code>Gather columns</code> from the
<code>Transformation type</code> dropdown. This will create new
variables <code>key</code> and <code>value</code>. <code>key</code> has
two levels (i.e., <code>cut</code> and <code>color</code>) and
<code>value</code> captures all values in <code>cut</code> and
<code>color</code>.</p>
</div>
<div class="section level4">
<h4 id="spread-column">Spread column<a class="anchor" aria-label="anchor" href="#spread-column"></a>
</h4>
<p><em>Spread</em> one column into multiple columns. The opposite of
<code>gather</code>. For a detailed discussion about <em>tidy</em> data
see the
<a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" target="_blank" class="external-link">tidy-data</a>
vignette.</p>
</div>
</div>
<div class="section level3">
<h3 id="r-functions">R-functions<a class="anchor" aria-label="anchor" href="#r-functions"></a>
</h3>
<p>For an overview of related R-functions used by Radiant to transform
data see
<a href="https://radiant-rstats.github.io/radiant.data/reference/index.html#section-data-transform" target="_blank"><em>Data
&gt; Transform</em></a></p>
<p>© Vincent Nijs (2018)
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="external-link"><img alt="Creative Commons License" style="border-width: 0" src="images/by-sa.png"></a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Vincent Nijs.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '311c7eff313b1f67999e5838086df74e',
    indexName: 'radiant_data',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
